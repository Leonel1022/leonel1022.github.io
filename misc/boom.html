<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="robots" content="noindex">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bomb Party</title>
    <style>
        :root {
            --bg-color: #1a1a2e;
            --bomb-color: #e94560;
            --text-color: #ffffff;
            --accent: #0f3460;
            --input-bg: #16213e;
            --btn-color: #00d2d3;
            --pause-color: #f39c12;
            --strict-color: #e74c3c; /* Rojo para modo estricto */
            --free-color: #27ae60;   /* Verde para modo libre */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        /* --- UI Superior --- */
        .top-bar {
            position: absolute;
            top: 20px;
            width: 90%;
            max-width: 600px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 100;
        }

        /* Contenedor izquierdo para Reglas y Modo */
        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 70%;
        }

        .rules-container {
            width: 100%;
            background: var(--accent);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        details { padding: 10px; cursor: pointer; }
        summary { font-weight: bold; list-style: none; outline: none;}
        
        .rules-content {
            margin-top: 10px;
            font-size: 0.9em;
            line-height: 1.5;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 10px;
        }

        /* Bot√≥n de Modo (Estricto/Libre) */
        .mode-btn {
            background: var(--free-color);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9em;
            text-align: left;
            transition: background 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .mode-btn:hover { filter: brightness(1.1); }

        /* Bot√≥n de Pausa */
        .pause-btn {
            background: var(--pause-color);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            padding: 10px 20px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            display: none;
        }
        .pause-btn:hover { filter: brightness(1.1); }

        /* --- Juego --- */
        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }

        /* Bomba */
        .bomb-wrapper {
            position: relative;
            width: 220px;
            height: 220px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .bomb {
            width: 180px;
            height: 180px;
            background: radial-gradient(circle at 30% 30%, #444, #000);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .fuse-curve {
            position: absolute;
            top: -20px;
            right: 40px;
            width: 50px;
            height: 50px;
            border-top: 5px solid #8b4513;
            border-right: 5px solid #8b4513;
            border-radius: 0 30px 0 0;
            z-index: 1;
        }

        .spark {
            position: absolute;
            top: -25px;
            right: 35px;
            width: 15px;
            height: 15px;
            background: #ffcc00;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffcc00, 0 0 20px #ff6600;
            animation: flicker 0.1s infinite alternate;
            display: none;
            z-index: 3;
        }

        @keyframes flicker {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0.7; transform: scale(1.3); }
        }

        /* Animaciones */
        .shake-light { animation: shake 0.5s infinite; }
        .shake-hard { animation: shake 0.1s infinite; }

        @keyframes shake {
            0% { transform: translate(0, 0) rotate(0); }
            25% { transform: translate(-2px, 2px) rotate(-1deg); }
            50% { transform: translate(2px, -2px) rotate(1deg); }
            75% { transform: translate(-2px, -2px) rotate(0); }
            100% { transform: translate(2px, 2px) rotate(-1deg); }
        }

        .syllable {
            font-size: 3.5em;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            color: #fff;
            font-family: 'Arial Black', sans-serif;
        }

        .syllable.hidden { display: none; }

        /* Barra de Tiempo */
        .timer-bar-bg {
            width: 100%;
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .timer-bar-fill {
            height: 100%;
            background: #00ff00;
            width: 100%;
            transition: width 0.1s linear;
        }

        /* Input Container */
        .input-group { display: flex; width: 100%; gap: 10px; }

        input[type="text"] {
            background: var(--input-bg);
            border: 3px solid var(--accent);
            color: white;
            padding: 15px;
            font-size: 1.5em;
            text-align: center;
            border-radius: 12px;
            outline: none;
            text-transform: uppercase;
            flex-grow: 1;
            transition: all 0.2s;
        }

        input[type="text"]:focus { border-color: var(--bomb-color); }
        input[type="text"]:disabled { opacity: 0.5; cursor: not-allowed; }

        .submit-btn {
            background: var(--btn-color);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            padding: 0 20px;
            font-size: 1.5em;
            color: #000;
            font-weight: bold;
            transition: transform 0.1s;
        }
        .submit-btn:active { transform: scale(0.95); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        input.error { animation: shake-input 0.3s; border-color: red !important; }
        input.success { border-color: #00ff00 !important; background: #0f3c20 !important; }

        @keyframes shake-input {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .info-panel {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .btn-main {
            background: var(--bomb-color);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.5em;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        #message {
            min-height: 25px;
            color: #ffaa00;
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="left-controls">
            <div class="rules-container">
                <details>
                    <summary>üìú REGLAS</summary>
                    <div class="rules-content">
                        <p>üí£ Escribe palabras con la s√≠laba.</p>
                        <p>üö´ No vale la misma s√≠laba.</p>
                        <p>üö´ Sin espacios.</p>
                    </div>
                </details>
            </div>
            <button id="modeBtn" class="mode-btn" onclick="toggleMode()">MODO: LIBRE üîì</button>
        </div>

        <button id="pauseBtn" class="pause-btn" onclick="togglePause()">PAUSA</button>
    </div>

    <div class="game-area">
        <div class="bomb-wrapper">
            <div class="fuse-curve"></div>
            <div class="spark" id="spark"></div>
            <div class="bomb" id="bomb">
                <div class="syllable" id="syllableDisplay">???</div>
            </div>
        </div>

        <div class="timer-bar-bg">
            <div class="timer-bar-fill" id="timerBar"></div>
        </div>

        <div class="input-group">
            <input type="text" id="wordInput" placeholder="Pulsa JUGAR" autocomplete="off" disabled>
            <button class="submit-btn" id="manualSubmitBtn" disabled>‚ûî</button>
        </div>

        <div id="message"></div>

        <div class="info-panel">
            <span id="scoreDisplay">Puntos: 0</span>
            <span id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
        </div>

        <button class="btn-main" id="startBtn" onclick="iniciarJuego()">JUGAR</button>
    </div>

<script>
    // --- DICCIONARIO B√ÅSICO ---
    const diccionarioComun = [
        "HOLA", "ADIOS", "CASA", "PERRO", "GATO", "ARBOL", "COCHE", "MESA", "SILLA", "LIBRO", "AGUA", "FUEGO", "TIERRA", "AIRE", "MANO", "PIE", "OJOS", "BOCA", "NARIZ", "PELO", "CIELO", "NUBE", "SOL", "LUNA", "ESTRELLA", "MAR", "RIO", "MONTA√ëA", "PLAYA", "BOSQUE", "COMER", "BEBER", "DORMIR", "CORRER", "SALTAR", "ANDAR", "HABLAR", "ESCUCHAR", "VER", "MIRAR", "GRANDE", "PEQUE√ëO", "ALTO", "BAJO", "GORDO", "FLACO", "GUAPO", "FEO", "RICO", "POBRE", "BUENO", "MALO", "NUEVO", "VIEJO", "JOVEN", "ANCIANO", "FELIZ", "TRISTE", "FUERTE", "DEBIL", "UNO", "DOS", "TRES", "CUATRO", "CINCO", "SEIS", "SIETE", "OCHO", "NUEVE", "DIEZ", "PRIMERO", "SEGUNDO", "TERCERO", "CUARTO", "QUINTO", "SEXTO", "SEPTIMO", "OCTAVO", "NOVENO", "DECIMO", "ROJO", "VERDE", "AZUL", "AMARILLO", "BLANCO", "NEGRO", "GRIS", "NARANJA", "ROSA", "VIOLETA", "LUNES", "MARTES", "MIERCOLES", "JUEVES", "VIERNES", "SABADO", "DOMINGO", "ENERO", "FEBRERO", "MARZO", "AMIGO", "ENEMIGO", "PADRE", "MADRE", "HERMANO", "HERMANA", "ABUELO", "ABUELA", "TIO", "TIA", "CANCION", "MUSICA", "PELICULA", "JUEGO", "DEPORTE", "FUTBOL", "BALONCESTO", "TENIS", "NATACION", "CARRERA", "ESCUELA", "COLEGIO", "UNIVERSIDAD", "TRABAJO", "OFICINA", "HOSPITAL", "POLICIA", "BOMBERO", "MEDICO", "ENFERMERO", "PAIS", "CIUDAD", "PUEBLO", "CALLE", "PLAZA", "PARQUE", "JARDIN", "EDIFICIO", "PISO", "COMPUTADORA", "ORDENADOR", "MOVIL", "TELEFONO", "INTERNET", "RED", "WIFI", "PANTALLA", "TECLADO", "RATON", "ANIMAL", "PLANTA", "FLOR", "FRUTA", "VERDURA", "CARNE", "PESCADO", "HUEVO", "PAN", "LECHE", "TIEMPO", "HORA", "MINUTO", "SEGUNDO", "DIA", "SEMANA", "MES", "A√ëO", "SIGLO", "SIEMPRE", "NUNCA", "A VECES", "AHORA", "LUEGO", "AYER", "HOY", "MA√ëANA", "PRONTO", "TARDE", "NOCHE", "AQUI", "ALLI", "ALLA", "CERCA", "LEJOS", "ARRIBA", "ABAJO", "DENTRO", "FUERA", "CENTRO", "YO", "TU", "EL", "ELLA", "NOSOTROS", "VOSOTROS", "ELLOS", "USTED", "MI", "CON", "SIN", "PARA", "POR", "DE", "A", "EN", "SOBRE", "ENTRE", "HASTA", "ACCION", "REACCION", "TRAICION", "EMOCION", "PENSION", "TENSION", "PRESION", "MISION", "VISION", "FUSION", "ESTACION", "OPERACION", "RELACION", "SITUACION", "EDUCACION", "INFORMACION", "DIRECCION", "PRODUCCION", "ATENCION", "DECISION", "EXPRESION", "DISCUSION", "CONCLUSION", "TELEVISION", "DIVISION", "PROFESION", "POSIBLE", "IMPOSIBLE", "INCREIBLE", "TERRIBLE", "AMABLE", "RESPONSABLE", "PROBABLE", "NOTABLE", "VERDAD", "BONDAD", "MALDAD", "EDAD", "LIBERTAD", "AMISTAD", "FELICIDAD", "CANTIDAD", "PROBLEMA", "PROCESO", "PROGRAMA", "PRODUCTO", "PROYECTO", "PROFESOR", "PROPIO", "PROBAR", "INTERES", "INTENTO", "INTERIOR", "INTELIGENTE", "INTENCION", "INTERNACIONAL", "RESTO", "RESPUESTA", "RESPECTO", "RESULTADO", "RESOLVER", "RESISTIR", "RESPIRAR", "RESTAURANTE", "VERANO", "VERSO", "VERGUENZA", "VERTICAL", "VESTIDO", "VECINO", "GRACIAS", "GRUPO", "GRITO", "GRASA", "GRAMO", "GRADO", "GRANO", "GRAVE", "HACER", "HACIA", "HACHA", "HACIENDA", "TENER", "TENEDOR", "TENDENCIA", "TIENDA", "ATENTO", "COPA", "CAPA", "MAPA", "TEMA", "TOMA", "PLATO", "PLACA", "DISCO", "COLA", "TELA", "PALA", "CAMA", "SUMA", "COMA", "DAMA", "POMA", "CLASE", "TRAMA", "TRATO", "ENTRADA", "SUELA", "MANTA", "MALA", "ANTE", "ASPA", "FINAL", "FINCA", "MITO", "DATO", "RETO", "COTO", "ALMA", "ALPACA", "BIOMA", "GEODA", "TIC", "QUITO", "NORTE", "NORMA", "FORMA", "MONTE", "TENSO", "REFORMA", "DEFORMA", "CONFORMA", "PROFORMA", "ASCO", "ASMA", "SOLA", "SECA", "CASO", "PASO", "CONTRA", "TRAER", "CAER", "PASEAR", "MAREAR", "TOREAR", "COREAR", "RECLAMAR", "DECLAMAR", "PROCLAMAR", "REPOSAR", "RETOMAR", "SUMAR", "ENTRAR", "TOCAR", "REMAR", "COCO", "SOPA", "PAPA", "PATO", "SUPER", "PRESO", "GUAPA", "CASA", "ALA", "ALAR","ALAS", "FRENO", "FRENOS"
    ];

    const silabas = [
        // Originales
        'AR', 'ER', 'TO', 'LA', 'CO', 'EN', 'CA', 'TE', 'DA', 'DE', 
        'EL', 'UN', 'SE', 'RE', 'DI', 'MI', 'SO', 'MA', 'PA', 'PO',
        'SU', 'AL', 'AS', 'CON', 'PER', 'EST', 'TRA', 'CION', 'BLE', 'DAD',
        'PRO', 'INT', 'RES', 'VER', 'GRA', 'HAC', 'TEN', 'GUA', 'FOR', 'NOR',
        'DIS', 'SUB', 'PRE', 'POS', 'ANT', 'BIO', 'GEO', 'MIC', 'TELE', 'MON',
        'TRI', 'CUA', 'QUI', 'COM', 'FIN', 'LOG', 'MET', 'TIC', 'CLA', 'PLA',
        // Nuevas
        'ON', 'ES', 'IS', 'OS', 'AN', 'IN', 'OR', 'TA', 'TI', 'LI', 'RA', 'RI', 'RO', 'SA', 'SI',
        'BRA', 'BRE', 'BRO', 'CRA', 'CRE', 'CRI', 'FRA', 'FRE', 'FRI', 'DRA', 'DRE', 'DRI', 'DRO',
        'MENT', 'IST', 'ISM', 'ANT', 'ENT', 'OSO', 'IVA', 'IVO', 'AUTO', 'EXTRA', 'SUPER', 'TRANS', 'ULTRA', 'HIPER',
        'QUER', 'GUIR', 'XEN', 'PSIC', 'OBS', 'ABS', 'OBJ', 'EXC', 'INS', 'CONT', 'PROG', 'CLAV', 'GLO', 'PLE', 'FLA', 'VINC'
    ];

    // --- VARIABLES DE ESTADO ---
    let juegoActivo = false;
    let pausado = false;
    let modoEstricto = false; // false = Libre (por defecto), true = Estricto
    let silabaActual = "";
    let palabrasUsadas = [];
    let historialSilabas = []; 
    const MAX_HISTORIAL = 20;
    let vidas = 3;
    let puntos = 0;
    let timerInterval;
    let tiempoTotalRonda = 10;
    let tiempoRestante = 10;

    const elBomb = document.getElementById('bomb');
    const elSpark = document.getElementById('spark');
    const elSyllable = document.getElementById('syllableDisplay');
    const elInput = document.getElementById('wordInput');
    const elSubmitBtn = document.getElementById('manualSubmitBtn');
    const elTimerBar = document.getElementById('timerBar');
    const elScore = document.getElementById('scoreDisplay');
    const elLives = document.getElementById('livesDisplay');
    const elMsg = document.getElementById('message');
    const elBtn = document.getElementById('startBtn');
    const elPauseBtn = document.getElementById('pauseBtn');
    const elModeBtn = document.getElementById('modeBtn');

    function iniciarJuego() {
        if(juegoActivo) return;
        juegoActivo = true;
        pausado = false;
        vidas = 3;
        puntos = 0;
        palabrasUsadas = [];
        historialSilabas = []; 
        actualizarUI();
        elBtn.style.display = 'none';
        elPauseBtn.style.display = 'block'; 
        elPauseBtn.textContent = 'PAUSA';
        elInput.disabled = false;
        elSubmitBtn.disabled = false;
        elInput.value = '';
        elInput.focus();
        elMsg.textContent = "";
        siguienteRonda();
    }

    function togglePause() {
        if (!juegoActivo) return;
        pausado = !pausado;
        if (pausado) {
            clearInterval(timerInterval);
            elPauseBtn.textContent = "REANUDAR";
            elMsg.textContent = "‚è∏Ô∏è JUEGO EN PAUSA";
            elInput.disabled = true;
            elSubmitBtn.disabled = true;
            elSyllable.classList.add('hidden');
        } else {
            elPauseBtn.textContent = "PAUSA";
            elMsg.textContent = "";
            elInput.disabled = false;
            elSubmitBtn.disabled = false;
            elInput.focus();
            elSyllable.classList.remove('hidden');
            iniciarTimer();
        }
    }

    function toggleMode() {
        modoEstricto = !modoEstricto;
        if (modoEstricto) {
            elModeBtn.textContent = "MODO: ESTRICTO üîí";
            elModeBtn.style.background = "var(--strict-color)";
            feedbackError("¬°Solo valen palabras del diccionario!");
        } else {
            elModeBtn.textContent = "MODO: LIBRE üîì";
            elModeBtn.style.background = "var(--free-color)";
            feedbackError("Valen todas las palabras bien escritas.");
        }
    }

    function obtenerSilabaSinRepetir() {
        const silabasDisponibles = silabas.filter(s => !historialSilabas.includes(s));
        if (silabasDisponibles.length === 0) {
            historialSilabas = [];
            return silabas[Math.floor(Math.random() * silabas.length)];
        }
        const elegida = silabasDisponibles[Math.floor(Math.random() * silabasDisponibles.length)];
        historialSilabas.push(elegida);
        if (historialSilabas.length > MAX_HISTORIAL) historialSilabas.shift();
        return elegida;
    }

    function siguienteRonda() {
        if (vidas <= 0) return finDelJuego();
        silabaActual = obtenerSilabaSinRepetir();
        elSyllable.textContent = silabaActual;
        elSyllable.classList.remove('hidden');
        elBomb.classList.remove('shake-light', 'shake-hard');
        elBomb.style.background = "radial-gradient(circle at 30% 30%, #444, #000)";
        elSpark.style.display = 'block';
        elInput.value = '';
        elInput.className = ''; 
        elMsg.textContent = "";
        tiempoTotalRonda = Math.max(3, 10 - (puntos * 0.2));
        tiempoRestante = tiempoTotalRonda;
        iniciarTimer();
    }

    function iniciarTimer() {
        clearInterval(timerInterval);
        const tickRate = 50; 
        timerInterval = setInterval(() => {
            if (pausado) return;
            tiempoRestante -= (tickRate / 1000);
            const porcentaje = (tiempoRestante / tiempoTotalRonda) * 100;
            elTimerBar.style.width = `${porcentaje}%`;
            if (porcentaje > 50) elTimerBar.style.backgroundColor = "#00ff00";
            else if (porcentaje > 20) { elTimerBar.style.backgroundColor = "#ffcc00"; elBomb.classList.add('shake-light'); }
            else { elTimerBar.style.backgroundColor = "#ff0000"; elBomb.classList.remove('shake-light'); elBomb.classList.add('shake-hard'); }
            if (tiempoRestante <= 0) explotar();
        }, tickRate);
    }

    function explotar() {
        clearInterval(timerInterval);
        elSpark.style.display = 'none';
        elTimerBar.style.width = "0%";
        elBomb.classList.remove('shake-light', 'shake-hard');
        elBomb.style.background = "radial-gradient(circle, #ff0000, #990000)";
        elMsg.textContent = "¬°BOOM! Tiempo agotado.";
        vidas--;
        actualizarUI();
        elInput.disabled = true;
        elSubmitBtn.disabled = true;
        setTimeout(() => {
            if (vidas > 0) { elInput.disabled = false; elSubmitBtn.disabled = false; elInput.focus(); siguienteRonda(); }
            else finDelJuego();
        }, 1500);
    }

    function finDelJuego() {
        juegoActivo = false;
        clearInterval(timerInterval);
        elSyllable.textContent = "FIN";
        elInput.disabled = true;
        elSubmitBtn.disabled = true;
        elBtn.textContent = "REINTENTAR";
        elBtn.style.display = "block";
        elPauseBtn.style.display = "none";
        elMsg.textContent = `Juego Terminado. Score: ${puntos}`;
    }

    function validarPalabraManual() {
        if (!juegoActivo || elInput.disabled || pausado) return;
        const inputRaw = elInput.value.trim().toUpperCase();
        if (inputRaw === "") return;

        // 1. REGLAS B√ÅSICAS
        if (inputRaw.includes(" ")) return feedbackError("¬°Una sola palabra!");
        if (inputRaw === silabaActual) return feedbackError(`No puedes usar solo "${silabaActual}"`);
        if (!inputRaw.includes(silabaActual)) return feedbackError("No contiene la s√≠laba");
        if (palabrasUsadas.includes(inputRaw)) return feedbackError("¬°Ya usada!");

        // 2. MODO ESTRICTO (NUEVO)
        if (modoEstricto) {
            // Verifica si est√° en el diccionario
            if (!diccionarioComun.includes(inputRaw)) {
                return feedbackError("‚ùå No est√° en el diccionario");
            }
        }

        // √âxito
        palabrasUsadas.push(inputRaw);
        puntos++;
        actualizarUI();
        elInput.classList.add('success');
        clearInterval(timerInterval);
        setTimeout(siguienteRonda, 200); 
    }

    function feedbackError(texto) {
        elMsg.textContent = texto;
        elInput.classList.add('error');
        setTimeout(() => {
            elInput.classList.remove('error');
            if (!pausado) elMsg.textContent = "";
        }, 500);
    }

    function actualizarUI() {
        elScore.textContent = `Puntos: ${puntos}`;
        let htmlVidas = "";
        for(let i=0; i<vidas; i++) htmlVidas += "‚ù§Ô∏è";
        elLives.textContent = htmlVidas;
    }

    elInput.addEventListener('keydown', (e) => { elInput.classList.remove('error'); if (e.key === 'Enter') validarPalabraManual(); });
    elSubmitBtn.addEventListener('click', () => { validarPalabraManual(); elInput.focus(); });
</script>
</body>
</html>
